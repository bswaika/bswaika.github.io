<div class="container">
    <div class="container mx-auto w-50 mt-3" *ngIf="loadingSubject | async">
        <mat-spinner class="mx-auto" mode="indeterminate" diameter="50"></mat-spinner>
    </div>
    <div class="container mx-auto mt-4" *ngIf="data.profile">
        <div class="row">
            <div class="col-4">
                <h1 class="py-0 my-0 lh-1 fw-bold">{{data.profile.ticker.toUpperCase()}} <a class="btn small px-0 py-0"><i class="bi bi-star"></i></a> </h1>
                <h2 class="text-muted py-0 my-0">{{data.profile.name}}</h2>
                <p class="small">{{data.profile.exchange}}</p>
                <button class="btn btn-success btn-sm px-3">Buy</button><button class="btn btn-danger btn-sm ms-2 px-3">Sell</button>
            </div>
            <div class="col-4">
                <img class="d-block mx-auto logo mt-2" [src]="data.profile.logo" alt="">
            </div>
            <div class="col-4 text-end">
                <h1 class="py-0 my-0 lh-1" [class]="data.quote.d > 0 ? 'text-success' : 'text-danger'">{{data.quote.c}}</h1>
                <h2 class="py-0 my-0" [class]="data.quote.d > 0 ? 'text-success' : 'text-danger'"><small><i class="bi" [class]="data.quote.d > 0 ? 'bi-caret-up-fill' : 'bi-caret-down-fill'"></i></small> {{data.quote.d.toFixed(2)}} ({{data.quote.dp.toFixed(2)}}%)</h2>
                <p class="small">{{formatDateString(now)}}</p>
            </div>
        </div>
        <div class="row w-100 text-center mt-3" [class]="data.quote.marketOpen ? 'text-success' : 'text-danger'">
            <div class="col-12 fw-bold">{{data.quote.marketOpen ? 'Market is Open' : 'Market Closed as on ' + formatDateString(data.quote.t * 1000)}}</div>
        </div>
        <div class="row mt-2 mb-3">
            <div class="col-12">
                <mat-tab-group mat-stretch-tabs>
                    <mat-tab label="Summary">
                        <div class="row w-100">
                            <div class="col-xs-12 col-sm-12 col-md-6 my-4">
                                <p class="lh-1 mb-1 mx-auto w-75 small"><span class="fw-bold summary-price">High Price:</span>{{data.quote.h.toFixed(2)}}</p>
                                <p class="lh-1 mb-1 mx-auto w-75 small"><span class="fw-bold summary-price">Low Price:</span>{{data.quote.l.toFixed(2)}}</p>
                                <p class="lh-1 mb-1 mx-auto w-75 small"><span class="fw-bold summary-price">Open Price:</span>{{data.quote.o.toFixed(2)}}</p>
                                <p class="lh-1 mb-1 mx-auto w-75 small"><span class="fw-bold summary-price">Prev. Close:</span>{{data.quote.pc.toFixed(2)}}</p>
                                <p class="text-center text-decoration-underline my-4 fw-bold">About the company</p>
                                <p class="small lh-1"><span class="fw-bold">IPO Start Date:</span> {{data.profile.ipo}}</p>
                                <p class="small lh-1"><span class="fw-bold">Industry:</span> {{data.profile.finnhubIndustry}}</p>
                                <p class="small lh-1"><span class="fw-bold">Webpage:</span>&nbsp;<a class="text-decoration-none" [href]="data.profile.weburl">{{data.profile.weburl}}</a></p>
                                <p class="small lh-1"><span class="fw-bold">Company Peers:</span><br><br>
                                    <a class="me-1 text-decoration-none" routerLink="{{'/search/' + peer}}" *ngFor="let peer of data.peers">{{peer}},</a>
                                </p>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-6 my-4">
                                <div [chart]="data.charts.summary"></div>
                            </div>
                        </div>
                    </mat-tab>
                    <mat-tab label="Top News">
                        <div class="row w-100">
                            <div *ngFor="let news of data.top_news" class="col-xs-12 col-sm-12 col-md-6 my-2">
                                <div class="card">
                                    <div class="card-body d-flex align-items-center">
                                        <img class="d-block" [src]="news.image" alt="">
                                        <p class="ms-2">{{news.headline}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </mat-tab>
                    <mat-tab label="Charts">
                        <div class="row w-100">
                            <div class="col-12">
                                <div [chart]="data.charts.charts"></div>
                            </div> 
                        </div>
                    </mat-tab>
                    <mat-tab label="Insights"></mat-tab>
                </mat-tab-group>
            </div>
        </div>
    </div>
</div>
